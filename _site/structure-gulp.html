<!DOCTYPE html> <html lang="fr" class="no-js"> <head> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Bnjjj's blog</title> <meta name="description" content="A blog about me, my passion, my work as a software developer @OVH" /> <meta name="keywords" content="developer, development, tech" /> <meta name="author" content="Bnjjj" /> <link rel="shortcut icon" href="/img/favicon.ico"> <link rel="stylesheet" type="text/css" href="/css/normalize.css" /> <link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.3.0/css/font-awesome.min.css" /> <link rel="stylesheet" type="text/css" href="/css/syntax.min.css" /> <link rel="stylesheet" type="text/css" href="/css/modern-blog.min.css" /> <!--[if IE]> <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> <![endif]--> <script> if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) { var root = document.getElementsByTagName('html')[0]; root.setAttribute('class', 'ff'); }; </script> </head> <body class="body"> <div class="container"> <header class="header"> <h1>Bnjjj's blog<span>Un blog à propos de moi, mes passions et mon métier (développeur chez <a href="http://ovh.com" target="_blank">@OVH</a>)</span></h1> <nav class="links"> <a href="https://twitter.com/BnJ25"><i class="fa fa-twitter-square fa-3x"></i></a> <a href="https://github.com/bnjjj"><i class="fa fa-github-square fa-3x"></i></a> <a href="https://be.linkedin.com/in/coenenbenjamin"><i class="fa fa-linkedin-square fa-3x"></i></a> <a href="mailto:contact@benjamincoenen.ovh"><i class="fa fa-envelope-square fa-3x"></i></a> </nav> </header> <div class="content"> <!-- trianglify pattern container --> <div class="pattern pattern--hidden"></div> <!-- cards --> <div class="wrapper"> <div class="card"> <div class="card__container card__container--closed"> <svg class="card__image" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1920 1200" preserveAspectRatio="xMidYMid slice"> <defs> <clipPath id="diverses-optimisations-pour-vos-tâches-gulp"> <polygon class="clip" points="0,1200 0,0 1920,0 1920,1200"></polygon> </clipPath> </defs> <image class="structure-gulp" clip-path="url(#diverses-optimisations-pour-vos-tâches-gulp)" width="1920" height="1200" xlink:href="/img/gulp-logo.jpg"></image> </svg> <div class="card__content" id="structure-gulp"> <i class="card__btn-close fa fa-times"></i> <div class="card__caption"> <h2 class="card__title">Bien structurer ses tâches Gulp</h2> <p class="card__subtitle">Diverses optimisations pour vos tâches gulp.</p> </div> <div class="card__copy"> <div class="meta"> <img class="meta__avatar" src="/img/authors/bnjjj.jpeg" /> <span class="meta__author">Bnjjj (Benjamin Coenen)</span> <span class="meta__date">Dec 5, 2015</span> </div> <div class="blog-content"> <p>Bonjour à tous, aujourd’hui je vous propose un petit article sur la mise en place d’une structure de gulpfile pour gulp. Je ne vais pas expliquer le fonctionnement de gulp ni en quoi il est utile, la connaissance de gulp est donc un prérequis pour la lecture de cet article.</p> <p>La question principale est : pourquoi avoir une bonne structure pour nos gulpfiles ? En fait, il n’y a que peu de temps que je me suis vraiment rendu compte de l’importance à optimiser au maximum le temps d’exécution de ces tâches automatiques, de build, de lint, etc… Car quand on travaille sur de petits projets perso avec peu de codes et process mis en place tout va bien. Mais une fois qu’on arrive avec un projet qui grandit et contient énormément de tâches et d’options, on a intérêt à optimiser ces systèmes d’automatisation avant de devenir fou à attendre chaque rebuild du système. Evidemment quand on développe ou débug on n’a pas envie d’attendre à chaque fois 30 secondes que les tâches se terminent. Rien que sur une journée c’est une perte de temps considérable alors ne parlons même pas du temps perdu sur un projet entier.</p> <p>C’est pour ces raisons que je me suis un peu attardé sur le problème et j’ai vraiment essayé de me faire un système modulaire, rapide tout en restant flexible. Attention, je n’ai pas la prétention de dire que la solution que je vous propose est la meilleure. Au contraire, écrire un article pour me permettre d’échanger à ce propos et trouver une meilleure solution est sûrement une de mes principales motivations.</p> <p>Commençons par la structure des fichiers. J’ai décidé de séparer chaque tâche dans un fichier séparé et de placer tous ces fichiers dans un dossier nommé “<em>gulp-scripts</em>”. Il y a plusieurs avantages à organiser nos fichiers de cette manière. Puisque nos fichiers porteront le même nom que la tâche qui la contient on trouvera plus facilement notre tâche et si on ne l’utilise plus il suffit tout simplement de supprimer le fichier. <img src="/img/tree-gulpfile.jpg" alt="tree" class="center-image" /></p> <p>On peut très bien aussi imaginer placer ces fichiers de tâches encore dans d’autres sous-dossiers en fonction de l’environnement de build (dev, prod, …). Mais pour faciliter l’explication je ne vais pas le mettre en application dans cet exemple. Notre gulpfile.js placé à la racine de notre projet va simplement nous servir pour importer (“<em>require</em>”) toutes les tasks que l’on a créées dans le dossier “<em>gulp-scripts</em>”. Il n’y a pas plus simple comme gulpfile principal.</p> <p>Voici le contenu de mon gulpfile principal :</p> <hr /> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">),</span>
  <span class="nx">requireDir</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'require-dir'</span><span class="p">);</span>

<span class="nx">requireDir</span><span class="p">(</span><span class="s1">'./gulp-scripts'</span><span class="p">,</span> <span class="p">{</span><span class="na">recurse</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span></code></pre></figure> <hr /> <p>Pour une tâche et donc un fichier il y a sa tâche et la tâche en watch associée. Celle que j’appelle watch est celle qui sera doté d’un watcher sur les fichiers concernés. C’est à dire que dès que l’on va changer ces fichiers ça relancera la tâche associée.</p> <hr /> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-babel'</span><span class="p">);</span>
 
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'babel'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'./www'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'./dist/es6'</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'babel:watch'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'./www'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'babel'</span><span class="p">]);</span>
<span class="p">});</span></code></pre></figure> <hr /> <p>Grâce à ces deux distinctions on va pouvoir créer des tâches personnalisées qui lient les tâches entre elles et on appellera leur task watch (“<em>nomDeLaTache:watch</em>”) à l’intérieur. De cette façon lorsqu’on modifiera un fichier watché on ne va relancer que les tâches concernées. Grâce à ça nos tâches ne se relanceront que si elles sont concernées, et les autres ne seront pas relancées pour rien. Et ça c’est un point TRÈS important pour notre optimisation de temps et process.</p> <p>Voici un exemple si je modifie un fichier JavaScript : <img src="/img/jswatch.jpg" alt="wath-js" class="center-image-large" /></p> <p>Voici un exemple si je modifie un fichier HTML : <img src="/img/watchhtml.jpg" alt="wath-js" class="center-image-large" /></p> <p>On peut constater que mon gulp ne se lance que pour les fichiers concernés.</p> <p>Une autre optimisation bien utile aussi est de sécuriser nos streams de tasks gulp. En effet, imaginons que j’ai une tâche sass qui transpile mon sass en css. Si je fais une erreur de syntaxe et enregistre notre tâche va planter et donc gulp va se couper brusquement. Encore une fois si on trouve directement d’où vient le problème ce n’est pas gênant mais si ce n’est pas le cas on est bon à relancer gulp à chaque crash. Pour éviter ce genre de soucis je vous conseille d’utiliser “<em><a href="https://www.npmjs.com/package/gulp-plumber">gulp-plumber</a></em>” qui va pemettre de ne pas couper notre gulp s’il y a une erreur.</p> <p>Pour conclure si vous souhaitez tester assez rapidement et facilement cette structure, je vous invite à télécharger le générateur yeoman <strong><a href="https://www.npmjs.com/package/generator-gulpfile-advanced">Gulpfile-advanced</a></strong> que j’ai développé avec la même structure que je viens de vous présenter. N’hésitez pas aussi à développer vos propres tasks et sous générateurs (cf : <strong><a href="https://github.com/bnjjj/generator-gulpfile-advanced#contributing">Contributing.md</a></strong>) et me les proposer via <strong><a href="https://github.com/bnjjj/generator-gulpfile-advanced">Github</a></strong> (pull-requests). Chacun de vos sous générateurs sera ainsi intégré sous forme de submodule et donc vous resterez mainteneur et propriétaire de votre code.</p> <p>Voilà, en espérant que cet article vous sera utile et encore une fois n’hésitez pas à me faire vos retours dans les commentaires.</p> </div> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.benjamincoenen.ovh/#structure-gulp" data-text="Bien structurer ses tâches Gulp" data-via="BnJ25" data-size="large" data-dnt="true">Tweet</a> <a href="https://twitter.com/BnJ25" class="twitter-follow-button" data-show-count="false" data-size="large">Suivre @BnJ25</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ var newComments = document.createElement('div'); newComments.id = 'disqus_thread'; var previousComment = document.getElementById('disqus_thread'); previousComment.parentNode.replaceChild(newComments, previousComment); var disqus_config = function () { this.page.url = 'http://benjamincoenen.ovh/#!structure-gulp'; this.page.identifier = 'structure-gulp'; }; (function () { var d = document, s = d.createElement('script'); d.type = 'text/javascript'; d.async = true; s.src = '//bnjjjsblog.disqus.com/embed.js'; s.setAttribute('data-timestamp', new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Veuillez activer JavaScript pour pouvoir visualiser les commentaires</noscript> </div> </div> </div> </div> <div class="card"> <div class="card__container card__container--closed"> <svg class="card__image" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1920 1200" preserveAspectRatio="xMidYMid slice"> <defs> <clipPath id="retour-d-expérience-sur-les-hackathons"> <polygon class="clip" points="0,1200 0,0 1920,0 1920,1200"></polygon> </clipPath> </defs> <image class="hackathons" clip-path="url(#retour-d-expérience-sur-les-hackathons)" width="1920" height="1200" xlink:href="/img/hackathonbnj.jpg"></image> </svg> <div class="card__content" id="hackathons"> <i class="card__btn-close fa fa-times"></i> <div class="card__caption"> <h2 class="card__title">Les hackathons: le bon, la brute et le truand</h2> <p class="card__subtitle">Retour d'expérience sur les hackathons.</p> </div> <div class="card__copy"> <div class="meta"> <img class="meta__avatar" src="/img/authors/bnjjj.jpeg" /> <span class="meta__author">Bnjjj</span> <span class="meta__date">Oct 28, 2015</span> </div> <div class="blog-content"> <p><strong>Les hackathons</strong>, ces concours qui font rêver les développeurs et qui deviennent de plus en plus courant. Plus un week-end ne se passe sans qu’il y en ait un. Aujourd’hui après avoir participé à une dizaine de ces concours et dans différents pays je pense qu’il peut être intéressant de faire un petit retour d’expérience les concernant.</p> <p><strong>Commençons par le positif,</strong> à la base quand je me suis lancé à la conquête de mon premier hackathon c’était clairement un saut dans le vide, je n’avais jamais fait de développement web ou mobile. J’étais plutôt dev système du coup j’étais vraiment novice dans ce domaine, tout comme mes amis. On a donc commencé à se lancer à la conquête du dev web pour arriver à la fin de notre weekend hackathon avec une application web fonctionnelle, c’était déjà une super victoire. Bref à l’heure du bilan de ce premier hackathon j’avais fait mes premiers pas dans le dev web et j’adorais ça ! Je tenais à raconter cette anecdote pour mettre en avant une de mes principales motivations de participer à un hackathon, l’apprentissage. Car oui si on veut apprendre, aller en hackathon nous permet d’apprendre énormément, en peu de temps et pas que sur le développement. J’ai aussi énormément appris sur la répartition des tâches entre membres du groupe, comment faire un bon pitch, et j’en passe…</p> <p><strong>Ce qui est génial</strong> aussi c’est qu’on a l’occasion de passer un geek-end avec des passionnés, faire de nouvelles rencontres, échanger sur nos pratiques, échanger nos connaissances et ça c’est vraiment plaisant ! Pour certaines personnes n’ayant pas l’occasion de travailler dans ce domaine je pense aussi que ça peut être un vrai changement et l’occasion d’approfondir un domaine qui nous tient à cœur. </p> <p><strong>Parlons un peu du négatif,</strong> dans le mot hackathon il y a le mot hack qui est généralement plus destiné aux personnes de la technique. Malheureusement les hackathons misent de moins en moins sur la technique je trouve. Les développeurs sont la plupart du temps peu mis en avant et je trouve ça dommage. Chaque fois que je propose à quelqu’un qui n’est pas de la technique de venir participer à un hackathon sa réaction est toujours la même : «<em>je ne sais pas coder je vais servir à rien</em>». Et pourtant c’est tout à fait le contraire, dans les hackathons ce sont surtout les commerciaux, marketeux et tout ces domaines là qui sont de plus en plus mis en avant. En aucun cas je ne critique ces métiers, simplement ils ont déjà pléthore de concours qui leur sont destiné. Comme les startups weekend par exemple. Forcément je le cite dans mes points négatifs car j’en parle de mon point de vue mais ça n’en est pas un pour tout le monde.</p> <p><strong>Au niveau technique</strong> il y a quand même des inconvénients. Celui auquel je pense le plus souvent est que l’on doit développer une idée fonctionnelle en un peu moins de 48h, du coup on doit développer très rapidement. Et généralement rapidement ne va pas de paire avec correctement. On se concentre juste sur le fond et pas sur la forme. Du coup l’avantage d’apprendre certaines connaissances techniques en hackathons peut aussi être un piège puisque ce n’est pas toujours très «<em>clean</em>» et c’est vrai que c’est gênant à force. C’est triste à dire mais généralement au bout du weekend notre application est fonctionnelle mais pas du tout maintenable.</p> <p><strong>Bref pour conclure,</strong> je continuerai à faire des hackathons mais moins fréquemment. Je me rends compte que mes amis les plus passionnés par la technique sont aussi de plus en plus lassés de ces concours. Peut être que ce terme «<em>hackathon</em>» n’a plus rien à voir en rapport avec le hack mais que c’est en réalité devenu un nom fourre tout pour attirer en même temps les développeurs, makers et esprits d’entrepreneuriat. Cela dit, ça m’a permis de faire énormément de rencontres, d’apprendre beaucoup et de souvent me retrouver pendant un week-end avec des passionnés comme moi et ça, ça n’a pas de prix. En aucun cas ces participations n’ont été une perte de temps pour moi. J’espère que cet article vous aura inspiré et que si vous n’avez jamais fait ce genre de concours vous savez désormais un peu plus à quoi vous attendre. Sachant qu’il ne faut jamais faire de généralité. N’hésitez pas vous aussi à me faire vos retours d’expériences à ce propos.</p> </div> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.benjamincoenen.ovh/#hackathons" data-text="Les hackathons: le bon, la brute et le truand" data-via="BnJ25" data-size="large" data-dnt="true">Tweet</a> <a href="https://twitter.com/BnJ25" class="twitter-follow-button" data-show-count="false" data-size="large">Suivre @BnJ25</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ var newComments = document.createElement('div'); newComments.id = 'disqus_thread'; var previousComment = document.getElementById('disqus_thread'); previousComment.parentNode.replaceChild(newComments, previousComment); var disqus_config = function () { this.page.url = 'http://benjamincoenen.ovh/#!hackathons'; this.page.identifier = 'hackathons'; }; (function () { var d = document, s = d.createElement('script'); d.type = 'text/javascript'; d.async = true; s.src = '//bnjjjsblog.disqus.com/embed.js'; s.setAttribute('data-timestamp', new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Veuillez activer JavaScript pour pouvoir visualiser les commentaires</noscript> </div> </div> </div> </div> <!-- /cards --> </div> </div> <!-- /container --> <!-- JS --> <script src="/js/vendors/trianglify.min.js"></script> <script src="/js/vendors/TweenMax.min.js"></script> <script src="/js/vendors/ScrollToPlugin.min.js"></script> <script src="/js/vendors/cash.min.js"></script> <script src="/js/card-modern-blog.min.js"></script> <script src="/js/modern-blog-posts.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-69538940-1', 'auto'); ga('send', 'pageview'); </script> </body> </html>
